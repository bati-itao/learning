(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[197],{bQRv:function(t,e,o){"use strict";o.d(e,"a",(function(){return O}));var s=o("rePB"),n=o("vN+2"),a=o.n(n),i=o("sEfC"),r=o.n(i),l=o("BzM2"),c=o("fw5G"),h=o.n(c),d=o("hhPA"),p=o.n(d),y=o("tYyt"),u=o("dUu8"),b=o("bizM"),g=o("ydTQ");function ownKeys(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,s)}return o}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(o),!0).forEach((function(e){Object(s.a)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}const L={internalUrl:"",displayUrl:""},O=p.a.createStore({name:"WebBrowserStore",mixins:[l.a.store],init(){this.listenToMany(b.a),this.debouncedOnLoadCallback=r()(this.onLoadCallback.bind(this),2e3)},getInitialState:()=>({init:!1,nonce:0,history:[],messages:[],historyIndex:-1,loading:!1,onLoadCallback:a.a,location:L}),currentLocation(){return this.state.history[this.state.historyIndex]},onClearHistory(){this.setState({init:!1,history:[],historyIndex:-1,location:L})},onRefresh(){this.currentLocation()?this.setState({nonce:this.state.nonce+1,loading:!0,onLoadCallback:this.onLoadComplete(b.a.refresh)}):b.a.refresh.completed()},onClearMessageHistory(){this.setState({messages:[]})},onReceiveMessage(t){this.setState(_objectSpread(_objectSpread({},this.state),{},{messages:[...this.state.messages,t]}))},onNavigateBack(){const t=this.state.historyIndex-1;this.setState({historyIndex:t,location:this.state.history[t],nonce:this.state.nonce+1,messages:[],loading:!0,onLoadCallback:this.onLoadComplete(b.a.navigateBack)})},onLoad(t){if(void 0===t)return;if(!/localhost/.test(t)&&!/http/.test(t)){let e,o;"/"!==t[0]&&(t="/".concat(t)),this.state.location?(e=this.state.location.displayUrl.host(),o=this.state.location.displayUrl.port()):(e="localhost",o="8000"),t=o?"".concat(e,":").concat(o).concat(t):e+t}/^http.*/.test(t)||(t="http://".concat(t));const e=this.currentLocation(),o=this.displayUrlToLocation(t);e&&o.displayUrl.toString()===e.displayUrl.toString()||this.push(o),this.setState({location:o,nonce:this.state.nonce+1,messages:[],loading:!0,onLoadCallback:this.debouncedOnLoadCallback})},onLoadCallback(){this.onLoadComplete(b.a.load)(),this.state.init?u.a.run():this.setState({init:!0})},onPush(t){const e=this.internalUrlToLocation(t);e.internalUrl.toString()!==this.state.location.internalUrl.toString()&&(this.push(e),this.setState({location:this.currentLocation()}))},push(t){this.state.history=this.state.history.slice(0,this.state.historyIndex+1),this.state.history.push(t),this.state.historyIndex=this.state.history.length-1},onLoadComplete(t){return()=>{t.completed(),this.setState({loading:!1})}},displayUrlToLocation(t){return{displayUrl:new h.a(t),internalUrl:this._displayToInternalUrl(t)}},internalUrlToLocation(t){return{internalUrl:new h.a(t),displayUrl:this._internalToDisplayUrl(t)}},_displayToInternalUrl(t){if(void 0===t)return"";const e=new h.a(t);return"localhost"!==e.host()&&""!==e.host()?t:g.a.interface.proxyUri(e)},_internalToDisplayUrl(t){const e=new h.a(t),o=y.a.get("container_api_proxy_domain");return o&&new RegExp(o).test(t)&&e.host("localhost"),e}})}}]);
//# sourceMappingURL=197.b5abe98ddc6ce6a40735.chunk.js.map